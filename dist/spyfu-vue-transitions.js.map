{"version":3,"file":"spyfu-vue-transitions.js","sources":["../src/transitions/auto_height.js","../src/constants.js","../src/transitions/number.js","../src/utils.js"],"sourcesContent":["// these transition hooks are fired in the following order. there\r\n// is a race between the onAfterEnter and onTransitionEnd hook,\r\n// but it doesn't matter which of these actually fires first.\r\n// 1. onBeforeEnter\r\n// 2. onBeforeLeave\r\n// 3. onLeave\r\n// 4. onEnter\r\n// 5a. onAfterEnter\r\n// 5b. onTransitionEnd\r\n\r\nfunction onBeforeEnter(el) {\r\n    // get the entering element ready to be transitioned\r\n    el.style.opacity = 0;\r\n    el.style.transition = `opacity ${this.props.duration / 2}ms ${this.props.fadeInCurve}`;\r\n    el.style.willChange = 'opacity';\r\n}\r\n\r\nfunction onBeforeLeave(el) {\r\n    // get the leaving element ready to be transitioned\r\n    el.style.opacity = 1;\r\n    el.style.transition = `opacity ${this.props.duration / 2}ms ${this.props.fadeOutCurve}`;\r\n    el.style.willChange = 'opacity';\r\n}\r\n\r\nfunction onLeave(el, done) {\r\n    // fix the height of our container\r\n    el.parentElement.style.height = `${el.offsetHeight}px`;\r\n    // make the leaving element fade out\r\n    el.style.opacity = 0;\r\n    // remove the leaving element from the dom after it fades out\r\n    setTimeout(done, this.props.duration / 2);\r\n}\r\n\r\nfunction onEnter(el, done) {\r\n    // prevent the transitioning elements from overflowing our container\r\n    el.parentElement.style.overflow = 'hidden';\r\n    el.parentElement.style.transition = `height ${this.props.duration}ms ${this.props.heightCurve}`;\r\n    el.parentElement.style.willChange = 'height';\r\n\r\n    // set the new height of our wrapper element\r\n    el.parentElement.style.height = `${el.offsetHeight}px`;\r\n\r\n    // wait for the leaving element to fade out, then fade in the entering one\r\n    setTimeout(() => {\r\n        el.style.opacity = 1;\r\n\r\n        // and when that transition is complete, end the entering element phase\r\n        setTimeout(done, this.props.duration / 2);\r\n    }, this.props.duration / 2);\r\n}\r\n\r\nfunction onAfterEnter(el) {\r\n    // remove inline styles from the entering element\r\n    el.removeAttribute('style');\r\n}\r\n\r\nfunction onTransitionEnd(e) {\r\n    // when the transitions are over remove inline styles from our wrapper\r\n    if (e.target.classList.contains('v-collapse-transition')) {\r\n        e.target.removeAttribute('style');\r\n    }\r\n}\r\n\r\nexport default {\r\n    render(h, context) {\r\n        return h('div', {\r\n            class: 'v-auto-height-transition',\r\n            on: {\r\n                transitionend: onTransitionEnd,\r\n            },\r\n        }, [\r\n            h('transition', {\r\n                on: {\r\n                    afterEnter: onAfterEnter,\r\n                    beforeEnter: onBeforeEnter.bind(context),\r\n                    enter: onEnter.bind(context),\r\n                    leave: onLeave.bind(context),\r\n                },\r\n            }, context.slots().default || h('div')),\r\n        ]);\r\n    },\r\n    functional: true,\r\n    props: {\r\n        duration: {\r\n            default: 350,\r\n            type: Number,\r\n        },\r\n        fadeOutCurve: {\r\n            default: 'ease-out',\r\n            type: String,\r\n        },\r\n        fadeInCurve: {\r\n            default: 'ease-in',\r\n            type: String,\r\n        },\r\n        heightCurve: {\r\n            default: 'ease-in-out',\r\n            type: String,\r\n        },\r\n        tag: {\r\n            default: 'div',\r\n            type: String,\r\n        },\r\n    },\r\n};\r\n","// cubic-bezier easing curves\r\n// see examples at https://easings.net\r\nexport const easeInSine = [0.47, 0, 0.745, 0.715];\r\nexport const easeOutSine = [0.39, 0.575, 0.565, 1];\r\nexport const easeInOutSine = [0.445, 0.05, 0.55, 0.95];\r\nexport const easeInQuad = [0.55, 0.085, 0.68, 0.53];\r\nexport const easeOutQuad = [0.25, 0.46, 0.45, 0.94];\r\nexport const easeInOutQuad = [0.455, 0.03, 0.515, 0.955];\r\nexport const easeInCubic = [0.55, 0.055, 0.675, 0.19];\r\nexport const easeOutCubic = [0.215, 0.61, 0.355, 1];\r\nexport const easeInOutCubic = [0.645, 0.045, 0.355, 1];\r\nexport const easeInQuart = [0.895, 0.03, 0.685, 0.22];\r\nexport const easeOutQuart = [0.165, 0.84, 0.44, 1];\r\nexport const easeInOutQuart = [0.77, 0, 0.175, 1];\r\nexport const easeInQuint = [0.755, 0.05, 0.855, 0.06];\r\nexport const easeOutQuint = [0.23, 1, 0.32, 1];\r\nexport const easeInOutQuint = [0.86, 0, 0.07, 1];\r\nexport const easeInExpo = [0.95, 0.05, 0.795, 0.035];\r\nexport const easeOutExpo = [0.19, 1, 0.22, 1];\r\nexport const easeInOutExpo = [1, 0, 0, 1];\r\nexport const easeInCirc = [0.6, 0.04, 0.98, 0.335];\r\nexport const easeOutCirc = [0.075, 0.82, 0.165, 1];\r\nexport const easeInOutCirc = [0.785, 0.135, 0.15, 0.86];\r\nexport const easeInBack = [0.6, -0.28, 0.735, 0.045];\r\nexport const easeOutBack = [0.175, 0.885, 0.32, 1.275];\r\nexport const easeInOutBack = [0.68, -0.55, 0.265, 1.55];","import { ease } from '../utils';\r\nimport { easeInOutQuart } from '..//constants';\r\n\r\n// protected method to animate counting\r\nfunction count(vm, to, from) {\r\n    const diff = to - from;\r\n\r\n    if (vm.ease) {\r\n        vm.ease.cancel();\r\n        vm.ease = null;\r\n    }\r\n\r\n    vm.ease = ease(vm.curve, (t) => {\r\n        vm.display = from + (diff * t);\r\n    }, vm.duration);\r\n}\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            currentAnimation: null,\r\n            display: this.appear ? 0 : this.value,\r\n        };\r\n    },\r\n    mounted() {\r\n        if (this.appear) {\r\n            setTimeout(() => count(this, this.value, 0), this.delay);\r\n        }\r\n    },\r\n    render() {\r\n        const value = Math.round(this.display);\r\n\r\n        return this._c('span', [\r\n            this._t('default', [\r\n                this._v(this._s(value))\r\n            ], {\r\n                value: this.display,\r\n            })\r\n        ], 2);\r\n    },\r\n    methods: {\r\n        cancel() {\r\n            if (this.currentAnimation) {\r\n                this.ease.cancel();\r\n            }\r\n            this.display = this.value;\r\n        },\r\n    },\r\n    props: {\r\n        appear: {\r\n            default: false,\r\n            type: Boolean,\r\n        },\r\n        curve: {\r\n            default: () => easeInOutQuart,\r\n            type: Array,\r\n        },\r\n        delay: {\r\n            default: 0,\r\n            type: Number,\r\n        },\r\n        duration: {\r\n            default: 3000,\r\n            type: Number,\r\n        },\r\n        value: {\r\n            required: true,\r\n            type: Number,\r\n        },\r\n    },\r\n    watch: {\r\n        value(to, from) {\r\n            count(this, to, from);\r\n        },\r\n    },\r\n};","import bezierEasing from 'bezier-easing';\r\n\r\n/**\r\n * Queue callbacks along a cubic-bezier easing curve.\r\n * \r\n * @param {Array<Number>}   curve       the easing curve to use\r\n * @param {Function}        cb          callback function to execute\r\n * @param {number}          duration    easing duration in milliseconds\r\n * @param {number}          frames      number of times to run callback fn\r\n */\r\nexport function ease(curve, cb, duration, frames = null) {\r\n    // assume 60fps if no value was provided\r\n    if (!frames) {\r\n        frames = duration / 16.6666;\r\n    }\r\n\r\n    // calculate the easing curve, and create an array\r\n    // to hold all of the timeouts we're about make\r\n    const easing = bezierEasing(...curve);\r\n    const timeouts = [];\r\n\r\n    // queue up each frame of the animation\r\n    for (let i = 0; i <= frames; i += 1) {\r\n        const frame = i / frames;\r\n\r\n        timeouts.push(\r\n            setTimeout(() => cb(easing(frame), i), frame * duration),\r\n        );\r\n    }\r\n\r\n    // and finally, return an object we can use to cancel the timeouts\r\n    return {\r\n        cancel: () => timeouts.forEach(clearTimeout),\r\n    };\r\n}"],"names":["onAfterEnter","el","removeAttribute","onTransitionEnd","e","target","classList","contains","render","h","context","class","on","transitionend","afterEnter","beforeEnter","style","opacity","transition","this","props","duration","willChange","bind","enter","done","parentElement","overflow","height","setTimeout","leave","slots","default","functional","type","Number","fadeOutCurve","String","fadeInCurve","heightCurve","tag","const","easeInOutQuart","count","vm","to","from","diff","ease","cancel","curve","cb","frames","easing","bezierEasing","timeouts","frame","i","push","forEach","clearTimeout","t","display","data","currentAnimation","appear","value","mounted","delay","Math","round","_c","_t","_v","_s","methods","Boolean","Array","required","watch"],"mappings":"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"}