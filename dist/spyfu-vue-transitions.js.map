{"version":3,"file":"spyfu-vue-transitions.js","sources":["../src/transitions/auto_height.js","../src/utils.js","../src/constants.js","../src/transitions/number.js"],"sourcesContent":["// these transition hooks are fired in the following order. there\r\n// is a race between the onAfterEnter and onTransitionEnd hook,\r\n// but it doesn't matter which of these actually fires first.\r\n// 1. onBeforeEnter\r\n// 2. onBeforeLeave\r\n// 3. onLeave\r\n// 4. onEnter\r\n// 5a. onAfterEnter\r\n// 5b. onTransitionEnd\r\n\r\nfunction onBeforeEnter(el) {\r\n    // get the entering element ready to be transitioned\r\n    el.style.opacity = 0;\r\n    el.style.transition = `opacity ${this.props.duration / 2}ms ${this.props.fadeInCurve}`;\r\n    el.style.willChange = 'opacity';\r\n}\r\n\r\nfunction onBeforeLeave(el) {\r\n    // get the leaving element ready to be transitioned\r\n    el.style.opacity = 1;\r\n    el.style.transition = `opacity ${this.props.duration / 2}ms ${this.props.fadeOutCurve}`;\r\n    el.style.willChange = 'opacity';\r\n}\r\n\r\nfunction onLeave(el, done) {\r\n    // fix the height of our container\r\n    el.parentElement.style.height = `${el.offsetHeight}px`;\r\n    // make the leaving element fade out\r\n    el.style.opacity = 0;\r\n    // remove the leaving element from the dom after it fades out\r\n    setTimeout(done, this.props.duration / 2);\r\n}\r\n\r\nfunction onEnter(el, done) {\r\n    // prevent the transitioning elements from overflowing our container\r\n    el.parentElement.style.overflow = 'hidden';\r\n    el.parentElement.style.transition = `height ${this.props.duration}ms ${this.props.heightCurve}`;\r\n    el.parentElement.style.willChange = 'height';\r\n\r\n    // set the new height of our wrapper element\r\n    el.parentElement.style.height = `${el.offsetHeight}px`;\r\n\r\n    // wait for the leaving element to fade out, then fade in the entering one\r\n    setTimeout(() => {\r\n        el.style.opacity = 1;\r\n\r\n        // and when that transition is complete, end the entering element phase\r\n        setTimeout(done, this.props.duration / 2);\r\n    }, this.props.duration / 2);\r\n}\r\n\r\nfunction onAfterEnter(el) {\r\n    // remove inline styles from the entering element\r\n    el.removeAttribute('style');\r\n}\r\n\r\nfunction onTransitionEnd(e) {\r\n    // when the transitions are over remove inline styles from our wrapper\r\n    if (e.target.classList.contains('v-collapse-transition')) {\r\n        e.target.removeAttribute('style');\r\n    }\r\n}\r\n\r\nexport default {\r\n    render(h, context) {\r\n        return h('div', {\r\n            class: 'v-auto-height-transition',\r\n            on: {\r\n                transitionend: onTransitionEnd,\r\n            },\r\n        }, [\r\n            h('transition', {\r\n                on: {\r\n                    afterEnter: onAfterEnter,\r\n                    beforeEnter: onBeforeEnter.bind(context),\r\n                    enter: onEnter.bind(context),\r\n                    leave: onLeave.bind(context),\r\n                },\r\n            }, context.slots().default || h('div')),\r\n        ]);\r\n    },\r\n    functional: true,\r\n    props: {\r\n        duration: {\r\n            default: 350,\r\n            type: Number,\r\n        },\r\n        fadeOutCurve: {\r\n            default: 'ease-out',\r\n            type: String,\r\n        },\r\n        fadeInCurve: {\r\n            default: 'ease-in',\r\n            type: String,\r\n        },\r\n        heightCurve: {\r\n            default: 'ease-in-out',\r\n            type: String,\r\n        },\r\n        tag: {\r\n            default: 'div',\r\n            type: String,\r\n        },\r\n    },\r\n};\r\n","import bezierEasing from 'bezier-easing';\r\n\r\n/**\r\n * Queue callbacks along a cubic-bezier easing curve.\r\n * \r\n * @param {Array<Number>}   curve       the easing curve to use\r\n * @param {Function}        cb          callback function to execute\r\n * @param {number}          duration    easing duration in milliseconds\r\n * @param {number}          frames      number of times to run callback fn\r\n */\r\nexport function ease(curve, cb, duration, frames = null) {\r\n    // assume 60fps if no value was provided\r\n    if (!frames) {\r\n        frames = duration / 16.6666;\r\n    }\r\n\r\n    // calculate the easing curve, and create an array\r\n    // to hold all of the timeouts we're about make\r\n    const easing = bezierEasing(...curve);\r\n    const timeouts = [];\r\n\r\n    // queue up each frame of the animation\r\n    for (let i = 0; i <= frames; i += 1) {\r\n        const frame = i / frames;\r\n\r\n        timeouts.push(\r\n            setTimeout(() => cb(easing(frame), i), frame * duration),\r\n        );\r\n    }\r\n\r\n    // and finally, return an object we can use to cancel the timeouts\r\n    return {\r\n        cancel: () => timeouts.forEach(clearTimeout),\r\n    };\r\n}","// cubic-bezier easing curves\r\n// see examples at https://easings.net\r\nexport const easeInSine = [0.47, 0, 0.745, 0.715];\r\nexport const easeOutSine = [0.39, 0.575, 0.565, 1];\r\nexport const easeInOutSine = [0.445, 0.05, 0.55, 0.95];\r\nexport const easeInQuad = [0.55, 0.085, 0.68, 0.53];\r\nexport const easeOutQuad = [0.25, 0.46, 0.45, 0.94];\r\nexport const easeInOutQuad = [0.455, 0.03, 0.515, 0.955];\r\nexport const easeInCubic = [0.55, 0.055, 0.675, 0.19];\r\nexport const easeOutCubic = [0.215, 0.61, 0.355, 1];\r\nexport const easeInOutCubic = [0.645, 0.045, 0.355, 1];\r\nexport const easeInQuart = [0.895, 0.03, 0.685, 0.22];\r\nexport const easeOutQuart = [0.165, 0.84, 0.44, 1];\r\nexport const easeInOutQuart = [0.77, 0, 0.175, 1];\r\nexport const easeInQuint = [0.755, 0.05, 0.855, 0.06];\r\nexport const easeOutQuint = [0.23, 1, 0.32, 1];\r\nexport const easeInOutQuint = [0.86, 0, 0.07, 1];\r\nexport const easeInExpo = [0.95, 0.05, 0.795, 0.035];\r\nexport const easeOutExpo = [0.19, 1, 0.22, 1];\r\nexport const easeInOutExpo = [1, 0, 0, 1];\r\nexport const easeInCirc = [0.6, 0.04, 0.98, 0.335];\r\nexport const easeOutCirc = [0.075, 0.82, 0.165, 1];\r\nexport const easeInOutCirc = [0.785, 0.135, 0.15, 0.86];\r\nexport const easeInBack = [0.6, -0.28, 0.735, 0.045];\r\nexport const easeOutBack = [0.175, 0.885, 0.32, 1.275];\r\nexport const easeInOutBack = [0.68, -0.55, 0.265, 1.55];","import { ease } from '../utils';\r\nimport { easeInOutQuart } from '..//constants';\r\n\r\n// protected method to animate counting\r\nfunction count(vm, to, from) {\r\n    const diff = to - from;\r\n\r\n    if (vm.ease) {\r\n        vm.ease.cancel();\r\n        vm.ease = null;\r\n    }\r\n\r\n    vm.ease = ease(vm.curve, (t) => {\r\n        vm.display = from + (diff * t);\r\n    }, vm.duration);\r\n}\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            currentAnimation: null,\r\n            display: this.appear ? 0 : this.value,\r\n        };\r\n    },\r\n    mounted() {\r\n        if (this.appear) {\r\n            setTimeout(() => count(this, this.value, 0), this.delay);\r\n        }\r\n    },\r\n    render() {\r\n        const value = Math.round(this.display);\r\n\r\n        return this._c('span', [\r\n            this._t('default', [\r\n                this._v(this._s(value))\r\n            ], {\r\n                value: this.display,\r\n            })\r\n        ], 2);\r\n    },\r\n    methods: {\r\n        cancel() {\r\n            if (this.currentAnimation) {\r\n                this.ease.cancel();\r\n            }\r\n            this.display = this.value;\r\n        },\r\n    },\r\n    props: {\r\n        appear: {\r\n            default: false,\r\n            type: Boolean,\r\n        },\r\n        curve: {\r\n            default: () => easeInOutQuart,\r\n            type: Array,\r\n        },\r\n        delay: {\r\n            default: 0,\r\n            type: Number,\r\n        },\r\n        duration: {\r\n            default: 3000,\r\n            type: Number,\r\n        },\r\n        value: {\r\n            required: true,\r\n            type: Number,\r\n        },\r\n    },\r\n    watch: {\r\n        value(to, from) {\r\n            count(this, to, from);\r\n        },\r\n    },\r\n};"],"names":["this","const","let","i"],"mappings":"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"}