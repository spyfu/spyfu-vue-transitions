{"version":3,"file":"spyfu-vue-transitions.esm.js","sources":["../src/transitions/auto_height.js","../src/utils.js","../src/constants.js","../src/transitions/number.js"],"sourcesContent":["// these transition hooks are fired in the following order. there\r\n// is a race between the onAfterEnter and onTransitionEnd hook,\r\n// but it doesn't matter which of these actually fires first.\r\n// 1. onBeforeEnter\r\n// 2. onBeforeLeave\r\n// 3. onLeave\r\n// 4. onEnter\r\n// 5a. onAfterEnter\r\n// 5b. onTransitionEnd\r\n\r\nfunction onBeforeEnter(el) {\r\n    // get the entering element ready to be transitioned\r\n    el.style.opacity = 0;\r\n    el.style.transition = `opacity ${this.props.duration / 2}ms ${this.props.fadeInCurve}`;\r\n    el.style.willChange = 'opacity';\r\n}\r\n\r\nfunction onBeforeLeave(el) {\r\n    // get the leaving element ready to be transitioned\r\n    el.style.opacity = 1;\r\n    el.style.transition = `opacity ${this.props.duration / 2}ms ${this.props.fadeOutCurve}`;\r\n    el.style.willChange = 'opacity';\r\n}\r\n\r\nfunction onLeave(el, done) {\r\n    // fix the height of our container\r\n    el.parentElement.style.height = `${el.offsetHeight}px`;\r\n    // make the leaving element fade out\r\n    el.style.opacity = 0;\r\n    // remove the leaving element from the dom after it fades out\r\n    setTimeout(done, this.props.duration / 2);\r\n}\r\n\r\nfunction onEnter(el, done) {\r\n    // prevent the transitioning elements from overflowing our container\r\n    el.parentElement.style.overflow = 'hidden';\r\n    el.parentElement.style.transition = `height ${this.props.duration}ms ${this.props.heightCurve}`;\r\n    el.parentElement.style.willChange = 'height';\r\n\r\n    // set the new height of our wrapper element\r\n    el.parentElement.style.height = `${el.offsetHeight}px`;\r\n\r\n    // wait for the leaving element to fade out, then fade in the entering one\r\n    setTimeout(() => {\r\n        el.style.opacity = 1;\r\n\r\n        // and when that transition is complete, end the entering element phase\r\n        setTimeout(done, this.props.duration / 2);\r\n    }, this.props.duration / 2);\r\n}\r\n\r\nfunction onAfterEnter(el) {\r\n    // remove inline styles from the entering element\r\n    el.removeAttribute('style');\r\n}\r\n\r\nfunction onTransitionEnd(e) {\r\n    // when the transitions are over remove inline styles from our wrapper\r\n    if (e.target.classList.contains('v-collapse-transition')) {\r\n        e.target.removeAttribute('style');\r\n    }\r\n}\r\n\r\nexport default {\r\n    render(h, context) {\r\n        return h('div', {\r\n            class: 'v-auto-height-transition',\r\n            on: {\r\n                transitionend: onTransitionEnd,\r\n            },\r\n        }, [\r\n            h('transition', {\r\n                on: {\r\n                    afterEnter: onAfterEnter,\r\n                    beforeEnter: onBeforeEnter.bind(context),\r\n                    enter: onEnter.bind(context),\r\n                    leave: onLeave.bind(context),\r\n                },\r\n            }, context.slots().default || h('div')),\r\n        ]);\r\n    },\r\n    functional: true,\r\n    props: {\r\n        duration: {\r\n            default: 350,\r\n            type: Number,\r\n        },\r\n        fadeOutCurve: {\r\n            default: 'ease-out',\r\n            type: String,\r\n        },\r\n        fadeInCurve: {\r\n            default: 'ease-in',\r\n            type: String,\r\n        },\r\n        heightCurve: {\r\n            default: 'ease-in-out',\r\n            type: String,\r\n        },\r\n        tag: {\r\n            default: 'div',\r\n            type: String,\r\n        },\r\n    },\r\n};\r\n","import bezierEasing from 'bezier-easing';\r\n\r\n/**\r\n * Queue callbacks along a cubic-bezier easing curve.\r\n * \r\n * @param {Array<Number>}   curve       the easing curve to use\r\n * @param {Function}        cb          callback function to execute\r\n * @param {number}          duration    easing duration in milliseconds\r\n * @param {number}          frames      number of times to run callback fn\r\n */\r\nexport function ease(curve, cb, duration, frames = null) {\r\n    // assume 60fps if no value was provided\r\n    if (!frames) {\r\n        frames = duration / 16.6666;\r\n    }\r\n\r\n    // calculate the easing curve, and create an array\r\n    // to hold all of the timeouts we're about make\r\n    const easing = bezierEasing(...curve);\r\n    const timeouts = [];\r\n\r\n    // queue up each frame of the animation\r\n    for (let i = 0; i <= frames; i += 1) {\r\n        const frame = i / frames;\r\n\r\n        timeouts.push(\r\n            setTimeout(() => cb(easing(frame), i), frame * duration),\r\n        );\r\n    }\r\n\r\n    // and finally, return an object we can use to cancel the timeouts\r\n    return {\r\n        cancel: () => timeouts.forEach(clearTimeout),\r\n    };\r\n}","// cubic-bezier easing curves\r\n// see examples at https://easings.net\r\nexport const easeInSine = [0.47, 0, 0.745, 0.715];\r\nexport const easeOutSine = [0.39, 0.575, 0.565, 1];\r\nexport const easeInOutSine = [0.445, 0.05, 0.55, 0.95];\r\nexport const easeInQuad = [0.55, 0.085, 0.68, 0.53];\r\nexport const easeOutQuad = [0.25, 0.46, 0.45, 0.94];\r\nexport const easeInOutQuad = [0.455, 0.03, 0.515, 0.955];\r\nexport const easeInCubic = [0.55, 0.055, 0.675, 0.19];\r\nexport const easeOutCubic = [0.215, 0.61, 0.355, 1];\r\nexport const easeInOutCubic = [0.645, 0.045, 0.355, 1];\r\nexport const easeInQuart = [0.895, 0.03, 0.685, 0.22];\r\nexport const easeOutQuart = [0.165, 0.84, 0.44, 1];\r\nexport const easeInOutQuart = [0.77, 0, 0.175, 1];\r\nexport const easeInQuint = [0.755, 0.05, 0.855, 0.06];\r\nexport const easeOutQuint = [0.23, 1, 0.32, 1];\r\nexport const easeInOutQuint = [0.86, 0, 0.07, 1];\r\nexport const easeInExpo = [0.95, 0.05, 0.795, 0.035];\r\nexport const easeOutExpo = [0.19, 1, 0.22, 1];\r\nexport const easeInOutExpo = [1, 0, 0, 1];\r\nexport const easeInCirc = [0.6, 0.04, 0.98, 0.335];\r\nexport const easeOutCirc = [0.075, 0.82, 0.165, 1];\r\nexport const easeInOutCirc = [0.785, 0.135, 0.15, 0.86];\r\nexport const easeInBack = [0.6, -0.28, 0.735, 0.045];\r\nexport const easeOutBack = [0.175, 0.885, 0.32, 1.275];\r\nexport const easeInOutBack = [0.68, -0.55, 0.265, 1.55];","import { ease } from '../utils';\r\nimport { easeInOutQuart } from '..//constants';\r\n\r\n// protected method to animate counting\r\nfunction count(vm, to, from) {\r\n    const diff = to - from;\r\n\r\n    if (vm.ease) {\r\n        vm.ease.cancel();\r\n        vm.ease = null;\r\n    }\r\n\r\n    vm.ease = ease(vm.curve, (t) => {\r\n        vm.display = from + (diff * t);\r\n    }, vm.duration);\r\n}\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            currentAnimation: null,\r\n            display: this.appear ? 0 : this.value,\r\n        };\r\n    },\r\n    mounted() {\r\n        if (this.appear) {\r\n            setTimeout(() => count(this, this.value, 0), this.delay);\r\n        }\r\n    },\r\n    render() {\r\n        const value = Math.round(this.display);\r\n\r\n        return this._c('span', [\r\n            this._t('default', [\r\n                this._v(this._s(value))\r\n            ], {\r\n                value: this.display,\r\n            })\r\n        ], 2);\r\n    },\r\n    methods: {\r\n        cancel() {\r\n            if (this.currentAnimation) {\r\n                this.ease.cancel();\r\n            }\r\n            this.display = this.value;\r\n        },\r\n    },\r\n    props: {\r\n        appear: {\r\n            default: false,\r\n            type: Boolean,\r\n        },\r\n        curve: {\r\n            default: () => easeInOutQuart,\r\n            type: Array,\r\n        },\r\n        delay: {\r\n            default: 0,\r\n            type: Number,\r\n        },\r\n        duration: {\r\n            default: 3000,\r\n            type: Number,\r\n        },\r\n        value: {\r\n            required: true,\r\n            type: Number,\r\n        },\r\n    },\r\n    watch: {\r\n        value(to, from) {\r\n            count(this, to, from);\r\n        },\r\n    },\r\n};"],"names":["this","const","let","i"],"mappings":";;AAAA;;;;;;;;;;AAUA,SAAS,aAAa,CAAC,EAAE,EAAE;;IAEvB,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC;IACrB,EAAE,CAAC,KAAK,CAAC,UAAU,GAAG,cAAW,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,EAAC,YAAM,IAAI,CAAC,KAAK,CAAC,WAAW,CAAE,CAAC;IACvF,EAAE,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;CACnC;;AASD,SAAS,OAAO,CAAC,EAAE,EAAE,IAAI,EAAE;;IAEvB,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,CAAG,EAAE,CAAC,oBAAgB,CAAC;;IAEvD,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC;;IAErB,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;CAC7C;;AAED,SAAS,OAAO,CAAC,EAAE,EAAE,IAAI,EAAE;;;;IAEvB,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC3C,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,GAAG,aAAU,IAAI,CAAC,KAAK,CAAC,SAAQ,YAAM,IAAI,CAAC,KAAK,CAAC,WAAW,CAAE,CAAC;IAChG,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;;;IAG7C,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,CAAG,EAAE,CAAC,oBAAgB,CAAC;;;IAGvD,UAAU,aAAI;QACV,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC;;;QAGrB,UAAU,CAAC,IAAI,EAAEA,MAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;KAC7C,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;CAC/B;;AAED,SAAS,YAAY,CAAC,EAAE,EAAE;;IAEtB,EAAE,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;CAC/B;;AAED,SAAS,eAAe,CAAC,CAAC,EAAE;;IAExB,IAAI,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,uBAAuB,CAAC,EAAE;QACtD,CAAC,CAAC,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;KACrC;CACJ;;AAED,kBAAe;IACX,uBAAM,CAAC,CAAC,EAAE,OAAO,EAAE;QACf,OAAO,CAAC,CAAC,KAAK,EAAE;YACZ,KAAK,EAAE,0BAA0B;YACjC,EAAE,EAAE;gBACA,aAAa,EAAE,eAAe;aACjC;SACJ,EAAE;YACC,CAAC,CAAC,YAAY,EAAE;gBACZ,EAAE,EAAE;oBACA,UAAU,EAAE,YAAY;oBACxB,WAAW,EAAE,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC;oBACxC,KAAK,EAAE,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC;oBAC5B,KAAK,EAAE,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC;iBAC/B;aACJ,EAAE,OAAO,CAAC,KAAK,EAAE,CAAC,OAAO,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,EAC1C,CAAC,CAAC;KACN;IACD,UAAU,EAAE,IAAI;IAChB,KAAK,EAAE;QACH,QAAQ,EAAE;YACN,OAAO,EAAE,GAAG;YACZ,IAAI,EAAE,MAAM;SACf;QACD,YAAY,EAAE;YACV,OAAO,EAAE,UAAU;YACnB,IAAI,EAAE,MAAM;SACf;QACD,WAAW,EAAE;YACT,OAAO,EAAE,SAAS;YAClB,IAAI,EAAE,MAAM;SACf;QACD,WAAW,EAAE;YACT,OAAO,EAAE,aAAa;YACtB,IAAI,EAAE,MAAM;SACf;QACD,GAAG,EAAE;YACD,OAAO,EAAE,KAAK;YACd,IAAI,EAAE,MAAM;SACf;KACJ;CACJ,CAAC;;;;;;;;;;AC9FF,AAAO,SAAS,IAAI,CAAC,KAAK,EAAE,EAAE,EAAE,QAAQ,EAAE,MAAa,EAAE;mCAAT,GAAG;;;IAE/C,IAAI,CAAC,MAAM,EAAE;QACT,MAAM,GAAG,QAAQ,GAAG,OAAO,CAAC;KAC/B;;;;IAIDC,IAAM,MAAM,GAAG,kBAAY,CAAC,QAAG,KAAK,CAAC,CAAC;IACtCA,IAAM,QAAQ,GAAG,EAAE,CAAC;;;8BAGiB;QACjCA,IAAM,KAAK,GAAG,CAAC,GAAG,MAAM,CAAC;;QAEzB,QAAQ,CAAC,IAAI;YACT,UAAU,aAAI,SAAG,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,IAAC,EAAE,KAAK,GAAG,QAAQ,CAAC;SAC3D,CAAC;;;IALN,KAAKC,IAAIC,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,MAAM,EAAE,CAAC,IAAI,CAAC,YAMlC;;;IAGD,OAAO;QACH,MAAM,cAAK,SAAG,QAAQ,CAAC,OAAO,CAAC,YAAY,IAAC;KAC/C,CAAC;;;ACjCN;AAaOF,IAAM,cAAc,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;;;ACTlD,SAAS,KAAK,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE;IACzBA,IAAM,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC;;IAEvB,IAAI,EAAE,CAAC,IAAI,EAAE;QACT,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;QACjB,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC;KAClB;;IAED,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,YAAG,CAAC,EAAE;QACzB,EAAE,CAAC,OAAO,GAAG,IAAI,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC;KAClC,EAAE,EAAE,CAAC,QAAQ,CAAC,CAAC;CACnB;;AAED,aAAe;IACX,mBAAI,GAAG;QACH,OAAO;YACH,gBAAgB,EAAE,IAAI;YACtB,OAAO,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK;SACxC,CAAC;KACL;IACD,yBAAO,GAAG;;;QACN,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,UAAU,aAAI,SAAG,KAAK,CAACD,MAAI,EAAEA,MAAI,CAAC,KAAK,EAAE,CAAC,IAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;SAC5D;KACJ;IACD,uBAAM,GAAG;QACLC,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;QAEvC,OAAO,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE;YACnB,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE;gBACf,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;aAC1B,EAAE;gBACC,KAAK,EAAE,IAAI,CAAC,OAAO;aACtB,CAAC;SACL,EAAE,CAAC,CAAC,CAAC;KACT;IACD,OAAO,EAAE;QACL,uBAAM,GAAG;YACL,IAAI,IAAI,CAAC,gBAAgB,EAAE;gBACvB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;aACtB;YACD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC;SAC7B;KACJ;IACD,KAAK,EAAE;QACH,MAAM,EAAE;YACJ,OAAO,EAAE,KAAK;YACd,IAAI,EAAE,OAAO;SAChB;QACD,KAAK,EAAE;YACH,OAAO,cAAK,SAAG,iBAAc;YAC7B,IAAI,EAAE,KAAK;SACd;QACD,KAAK,EAAE;YACH,OAAO,EAAE,CAAC;YACV,IAAI,EAAE,MAAM;SACf;QACD,QAAQ,EAAE;YACN,OAAO,EAAE,IAAI;YACb,IAAI,EAAE,MAAM;SACf;QACD,KAAK,EAAE;YACH,QAAQ,EAAE,IAAI;YACd,IAAI,EAAE,MAAM;SACf;KACJ;IACD,KAAK,EAAE;QACH,qBAAK,CAAC,EAAE,EAAE,IAAI,EAAE;YACZ,KAAK,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;SACzB;KACJ;CACJ;;;;"}